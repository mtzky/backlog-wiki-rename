import groovy.json.JsonSlurper

tasks.withType(Wrapper) {
    distributionType = Wrapper.DistributionType.ALL
    outputs.upToDateWhen {
        def versionService = new URL('https://services.gradle.org/versions/current')
        def currentVersion = new JsonSlurper().parse(versionService).version as String
        if (gradleVersion == currentVersion) {
            return true
        }
        gradleVersion = currentVersion
        return false
    }
    doLast {
        println "gradleVersion: ${gradleVersion}, distributionType: ${distributionType}"
    }
}
